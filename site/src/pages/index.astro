 ---
import Frame from "../layouts/frame.astro";
import Nav from "../components/Nav.astro";
import Hero from "../components/Hero.astro";
import Stats from "../components/Stats.astro";
import Features from "../components/Features.astro";
import CTA from "../components/CTA.astro";
---

<Frame classes='flex-col'>
  <Nav id="nav" />
  <Hero id="heroSection">
    <Stats slot="stats" />
  </Hero>

  <Features />

  <CTA />
</Frame>

<script>
  const nav = document.getElementById('nav');
  const heroSection = document.getElementById('heroSection');

  if (nav && heroSection) {
    const heroHeight = heroSection.offsetHeight;

    // Set fixed positioning always
    nav.classList.add('fixed', 'top-0', 'w-full', 'z-50');
    nav.style.transform = 'translateY(-100%)'; // Start hidden

    const updateNav = () => {
      if (window.scrollY > heroHeight) {
        nav.style.transform = 'translateY(0)';
      } else {
        nav.style.transform = 'translateY(-100%)';
      }
    };

    window.addEventListener('scroll', updateNav);
    updateNav(); // Initial check
  }
</script>