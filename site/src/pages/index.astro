 ---
import Frame from "../layouts/frame.astro";
import Nav from "../components/Nav.astro";
import Hero from "../components/Hero.astro";
import Stats from "../components/Stats.astro";
import Features from "../components/Features.astro";
import CTA from "../components/CTA.astro";
---

<Frame classes='flex-col'>
  <Nav id="nav" />
  <Hero id="heroSection">
    <Stats slot="stats" />
  </Hero>

  <Features />

  <CTA />
</Frame>

<script>

  const nav = document.getElementById('nav');
  const heroSection = document.getElementById('heroSection');

  if (nav && heroSection) {
    const heroHeight = heroSection.offsetHeight;

    const updateNav = () => {
      console.log(heroHeight, window.scrollY);
      if (window.scrollY > heroHeight) {
        nav.style.display = 'block';
        nav.classList.remove('hidden');
        console.log('bonjour');
        console.log(nav.getAttribute('class'));

      } else {
        nav.classList.add('hidden');
        nav.classList.add('block');
        console.log('hello');
        console.log(nav.getAttribute('class'));
        nav.style.display = 'none';
      }
    };

    window.addEventListener('scroll', updateNav);
    updateNav(); // initial check
  }
</script>